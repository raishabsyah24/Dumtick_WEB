{"ast":null,"code":"var _jsxFileName = \"/home/hitech/dumbtik/DW13KMC9U_dumb-tick/tes-1/src/components/buttonFavorite.js\";\nimport React, { Component } from \"react\";\nimport { Favorite } from \"@material-ui/icons\";\nimport { IconButton } from \"@material-ui/core\";\nimport Axios from \"axios\";\n\nclass ButtonFav extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleFavorite = id => event => {\n      const token = localStorage.getItem(\"token\");\n      event.preventDefault();\n      Axios({\n        method: \"post\",\n        url: \"http://localhost:7000/api/v1/favorite\",\n        data: {\n          event_id: id\n        },\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => {\n        if (res.data.status === false) {\n          alert(res.data.message);\n        } else {\n          window.location.href = \"http://localhost:3000/\";\n        }\n      });\n    };\n\n    this.handleCancelFavorite = id => event => {\n      const token = localStorage.getItem(\"token\");\n      event.preventDefault();\n      Axios({\n        method: \"delete\",\n        url: \"http://localhost:7000/api/v1/favorite\",\n        data: {\n          event_id: id\n        },\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(res => {\n        if (res.data.status === false) {\n          alert(res.data.message);\n        } else {\n          alert(res.data.message);\n          window.location.href = \"http://localhost:3000/\";\n        }\n      });\n    };\n\n    this.state = {\n      fav: [],\n      success: false\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"token\");\n    Axios({\n      method: \"get\",\n      url: \"http://localhost:7000/api/v1/user/favorite\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      if (res.data.length === 0) {\n        this.setState({\n          success: false\n        });\n      } else {\n        this.setState({\n          fav: res.data,\n          success: true\n        });\n      }\n    });\n  }\n\n  render() {\n    if (this.state.success === false) {\n      return React.createElement(IconButton, {\n        onClick: this.handleFavorite(this.props.event_id),\n        onDoubleClick: this.handleCancelFavorite(this.props.event_id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(Favorite, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }));\n    } else {\n      const found = this.state.fav.find(fav => {\n        return fav.event_id === this.props.event_id;\n      });\n\n      if (found) {\n        return React.createElement(IconButton, {\n          onDoubleClick: this.handleCancelFavorite(this.props.event_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(Favorite, {\n          color: \"error\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(IconButton, {\n          onClick: this.handleFavorite(this.props.event_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(Favorite, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }));\n      }\n    }\n  }\n\n}\n\nexport default ButtonFav;","map":{"version":3,"sources":["/home/hitech/dumbtik/DW13KMC9U_dumb-tick/tes-1/src/components/buttonFavorite.js"],"names":["React","Component","Favorite","IconButton","Axios","ButtonFav","constructor","props","handleFavorite","id","event","token","localStorage","getItem","preventDefault","method","url","data","event_id","headers","Authorization","then","res","status","alert","message","window","location","href","handleCancelFavorite","state","fav","success","componentDidMount","length","setState","render","found","find"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,SAAN,SAAwBJ,SAAxB,CAAkC;AAChCK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAQnBC,cARmB,GAQFC,EAAE,IAAIC,KAAK,IAAI;AAC9B,YAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACAH,MAAAA,KAAK,CAACI,cAAN;AACAV,MAAAA,KAAK,CAAC;AACJW,QAAAA,MAAM,EAAE,MADJ;AAEJC,QAAAA,GAAG,EAAE,uCAFD;AAGJC,QAAAA,IAAI,EAAE;AACJC,UAAAA,QAAQ,EAAET;AADN,SAHF;AAMJU,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAAST,KAAM;AADxB;AANL,OAAD,CAAL,CASGU,IATH,CASQC,GAAG,IAAI;AACb,YAAIA,GAAG,CAACL,IAAJ,CAASM,MAAT,KAAoB,KAAxB,EAA+B;AAC7BC,UAAAA,KAAK,CAACF,GAAG,CAACL,IAAJ,CAASQ,OAAV,CAAL;AACD,SAFD,MAEO;AACLC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,wBAAvB;AACD;AACF,OAfD;AAgBD,KA3BkB;;AAAA,SA4BnBC,oBA5BmB,GA4BIpB,EAAE,IAAIC,KAAK,IAAI;AACpC,YAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AACAH,MAAAA,KAAK,CAACI,cAAN;AACAV,MAAAA,KAAK,CAAC;AACJW,QAAAA,MAAM,EAAE,QADJ;AAEJC,QAAAA,GAAG,EAAE,uCAFD;AAGJC,QAAAA,IAAI,EAAE;AACJC,UAAAA,QAAQ,EAAET;AADN,SAHF;AAMJU,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAAST,KAAM;AADxB;AANL,OAAD,CAAL,CASGU,IATH,CASQC,GAAG,IAAI;AACb,YAAIA,GAAG,CAACL,IAAJ,CAASM,MAAT,KAAoB,KAAxB,EAA+B;AAC7BC,UAAAA,KAAK,CAACF,GAAG,CAACL,IAAJ,CAASQ,OAAV,CAAL;AACD,SAFD,MAEO;AACLD,UAAAA,KAAK,CAACF,GAAG,CAACL,IAAJ,CAASQ,OAAV,CAAL;AACAC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,wBAAvB;AACD;AACF,OAhBD;AAiBD,KAhDkB;;AAEjB,SAAKE,KAAL,GAAa;AACXC,MAAAA,GAAG,EAAE,EADM;AAEXC,MAAAA,OAAO,EAAE;AAFE,KAAb;AAID;;AA2CDC,EAAAA,iBAAiB,GAAG;AAClB,UAAMtB,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;AAEAT,IAAAA,KAAK,CAAC;AACJW,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,EAAE,4CAFD;AAGJG,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAAST,KAAM;AADxB;AAHL,KAAD,CAAL,CAMGU,IANH,CAMQC,GAAG,IAAI;AACb,UAAIA,GAAG,CAACL,IAAJ,CAASiB,MAAT,KAAoB,CAAxB,EAA2B;AACzB,aAAKC,QAAL,CAAc;AAAEH,UAAAA,OAAO,EAAE;AAAX,SAAd;AACD,OAFD,MAEO;AACL,aAAKG,QAAL,CAAc;AAAEJ,UAAAA,GAAG,EAAET,GAAG,CAACL,IAAX;AAAiBe,UAAAA,OAAO,EAAE;AAA1B,SAAd;AACD;AACF,KAZD;AAaD;;AACDI,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKN,KAAL,CAAWE,OAAX,KAAuB,KAA3B,EAAkC;AAChC,aACE,oBAAC,UAAD;AACE,QAAA,OAAO,EAAE,KAAKxB,cAAL,CAAoB,KAAKD,KAAL,CAAWW,QAA/B,CADX;AAEE,QAAA,aAAa,EAAE,KAAKW,oBAAL,CAA0B,KAAKtB,KAAL,CAAWW,QAArC,CAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,CADF;AAQD,KATD,MASO;AACL,YAAMmB,KAAK,GAAG,KAAKP,KAAL,CAAWC,GAAX,CAAeO,IAAf,CAAoBP,GAAG,IAAI;AACvC,eAAOA,GAAG,CAACb,QAAJ,KAAiB,KAAKX,KAAL,CAAWW,QAAnC;AACD,OAFa,CAAd;;AAGA,UAAImB,KAAJ,EAAW;AACT,eACE,oBAAC,UAAD;AACE,UAAA,aAAa,EAAE,KAAKR,oBAAL,CAA0B,KAAKtB,KAAL,CAAWW,QAArC,CADjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAGE,oBAAC,QAAD;AAAU,UAAA,KAAK,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHF,CADF;AAOD,OARD,MAQO;AACL,eACE,oBAAC,UAAD;AAAY,UAAA,OAAO,EAAE,KAAKV,cAAL,CAAoB,KAAKD,KAAL,CAAWW,QAA/B,CAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CADF;AAKD;AACF;AACF;;AAjG+B;;AAoGlC,eAAeb,SAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Favorite } from \"@material-ui/icons\";\nimport { IconButton } from \"@material-ui/core\";\nimport Axios from \"axios\";\n\nclass ButtonFav extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fav: [],\n      success: false\n    };\n  }\n\n  handleFavorite = id => event => {\n    const token = localStorage.getItem(\"token\");\n    event.preventDefault();\n    Axios({\n      method: \"post\",\n      url: \"http://localhost:7000/api/v1/favorite\",\n      data: {\n        event_id: id\n      },\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      if (res.data.status === false) {\n        alert(res.data.message);\n      } else {\n        window.location.href = \"http://localhost:3000/\";\n      }\n    });\n  };\n  handleCancelFavorite = id => event => {\n    const token = localStorage.getItem(\"token\");\n    event.preventDefault();\n    Axios({\n      method: \"delete\",\n      url: \"http://localhost:7000/api/v1/favorite\",\n      data: {\n        event_id: id\n      },\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      if (res.data.status === false) {\n        alert(res.data.message);\n      } else {\n        alert(res.data.message);\n        window.location.href = \"http://localhost:3000/\";\n      }\n    });\n  };\n  componentDidMount() {\n    const token = localStorage.getItem(\"token\");\n\n    Axios({\n      method: \"get\",\n      url: \"http://localhost:7000/api/v1/user/favorite\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(res => {\n      if (res.data.length === 0) {\n        this.setState({ success: false });\n      } else {\n        this.setState({ fav: res.data, success: true });\n      }\n    });\n  }\n  render() {\n    if (this.state.success === false) {\n      return (\n        <IconButton\n          onClick={this.handleFavorite(this.props.event_id)}\n          onDoubleClick={this.handleCancelFavorite(this.props.event_id)}\n        >\n          <Favorite />\n        </IconButton>\n      );\n    } else {\n      const found = this.state.fav.find(fav => {\n        return fav.event_id === this.props.event_id;\n      });\n      if (found) {\n        return (\n          <IconButton\n            onDoubleClick={this.handleCancelFavorite(this.props.event_id)}\n          >\n            <Favorite color=\"error\" />\n          </IconButton>\n        );\n      } else {\n        return (\n          <IconButton onClick={this.handleFavorite(this.props.event_id)}>\n            <Favorite />\n          </IconButton>\n        );\n      }\n    }\n  }\n}\n\nexport default ButtonFav;\n"]},"metadata":{},"sourceType":"module"}